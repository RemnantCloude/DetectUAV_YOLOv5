<?xml version="1.0"?>
<launch>
    <node name="yolov5_node" pkg="yolov5" type="yolov5_node" output="screen">
        <param name="weights" value="/home/cloude/ugv_camera/src/yolov5/yolov5s_old.pt" />
        <param name="imgsz" value="640" />
        <param name="conf_thres" value="0.2" /> <!-- confidence threshold -->
        <param name="iou_thres" value="0.45" /> <!-- NMS IOU threshold -->
        <param name="max_det" value="1000" /> <!-- maximum detections per image -->
        <param name="device" value="0" /> <!-- cuda device, i.e. 0 or 0,1,2,3 or cpu -->
        <param name="local_camera" value="False" /> <!-- 本地笔记本电脑摄像头-->
        <param name="view_img" value="True" />
        <param name="agnostic_nms" value="False" />
        <param name="augment" value="False" />
        <param name="line_thickness" value="3" /> <!-- bounding box thickness (pixels) -->
        <param name="half" value="False" /> <!-- use FP16 half-precision inference 在win环境测试发现是否开启意义不大，linux环境有bug-->
        <param name="camera_field_angle_pitch" value="60" />
        <param name="camera_field_angle_yaw" value="80" />
        <param name="uav_size_x" value="0.4" />
        <param name="uav_size_y" value="0.2" />
        <param name="debug" value="True" />
        <param name="save_img" value="False" />
    </node>

    <!-- Determine this using rosrun pointgrey_camera_driver list_cameras.
       If not specified, defaults to first camera found. -->
    <arg name="camera_name" default="camera" />
    <arg name="camera_serial" default="19327578" />
    <arg name="calibrated" default="0" />

    <group ns="$(arg camera_name)">
        <node pkg="nodelet" type="nodelet" name="camera_nodelet_manager" args="manager" output="screen" />
        <node pkg="nodelet" type="nodelet" name="camera_nodelet" args="load pointgrey_camera_driver/PointGreyCameraNodelet camera_nodelet_manager">
            <param name="frame_id" value="camera" />
            <param name="serial" value="$(arg camera_serial)" />

            <!-- When unspecified, the driver will use the default framerate as
                 given by the camera itself. Use this parameter to override 
                 that value for cameras capable of other framerates. -->
            <param name="frame_rate" value="5" /> <!-- 10 FPS max-->

            <!-- Use the camera_calibration package to create this file -->
            <!--<param name="camera_info_url" if="$(arg calibrated)"
             value="file://$(env HOME)/.ros/camera_info/$(arg camera_serial).yaml" />-->
        </node>
        <node pkg="nodelet" type="nodelet" name="image_proc_debayer" args="load image_proc/debayer camera_nodelet_manager"></node>
    </group>
</launch>